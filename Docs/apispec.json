{"components":{"securitySchemes":{"bearerAuth":{"in":"header","name":"Authorization","type":"apiKey"}}},"definitions":{"MsgSchema":{"properties":{"msg":{"type":"string"}},"required":["msg"],"type":"object"},"ProvisioningUrlSchema":{"properties":{"url":{"type":"string"}},"required":["url"],"type":"object"},"RequestIdSchema":{"properties":{"request_id":{"type":"string"},"token":{"properties":{"access_token":{"type":"string"},"refresh_token":{"type":"string"},"required_fields":{"items":{"type":"string"},"type":"array"}},"required":["access_token","refresh_token","required_fields"],"type":"object"},"totp_active":{"type":"boolean"}},"required":["request_id","token","totp_active"],"type":"object"},"RoleSchema":{"properties":{"description":{"type":"string"},"id":{"format":"uuid","type":"string"},"role":{"type":"string"}},"required":["description","role"],"type":"object"},"SocialTokenSchema":{"properties":{"access_token":{"type":"string"},"refresh_token":{"type":"string"},"required_fields":{"items":{"type":"string"},"type":"array"}},"required":["access_token","refresh_token","required_fields"],"type":"object"},"TokenSchema":{"properties":{"access_token":{"type":"string"},"refresh_token":{"type":"string"}},"required":["access_token","refresh_token"],"type":"object"},"UserHistorySchema":{"properties":{"id":{"format":"uuid","type":"string"},"login_date":{"format":"date-time","type":"string"},"login_status":{"type":"boolean"},"user_agent":{"type":"string"},"user_id":{"format":"uuid","type":"string"}},"type":"object"}},"info":{"description":"powered by Flasgger","termsOfService":"/tos","title":"Auth API","version":"0.0.1"},"openapi":"3.0.2","paths":{"/api/v1/roles/":{"get":{"responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/definitions/RoleSchema"},"type":"array"}}},"description":"OK"},"201":{"content":{"application/json":{"example":{"msg":"Object successfully created"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Created"},"401":{"content":{"application/json":{"example":{"msg":"Unauthorized"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Unauthorized"},"409":{"content":{"application/json":{"example":{"msg":"Object already exists"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Conflict"}},"tags":["roles"]},"post":{"responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/definitions/RoleSchema"},"type":"array"}}},"description":"OK"},"201":{"content":{"application/json":{"example":{"msg":"Object successfully created"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Created"},"401":{"content":{"application/json":{"example":{"msg":"Unauthorized"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Unauthorized"},"409":{"content":{"application/json":{"example":{"msg":"Object already exists"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Conflict"}},"tags":["roles"]}},"/api/v1/roles/user/check":{"post":{"responses":{"200":{"content":{"application/json":{"example":["role1","role2"],"schema":{"format":"string","type":"array"}}},"description":"OK"},"401":{"content":{"application/json":{"example":{"msg":"Unauthorized"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Unauthorized"},"422":{"content":{"application/json":{"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Forbidden"}},"tags":["roles"]}},"/api/v1/roles/user/{user_id}":{"delete":{"parameters":[{"in":"path","name":"user_id","required":true,"schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"content":{"application/json":{"example":{"msg":"Success"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"OK"},"401":{"content":{"application/json":{"example":{"msg":"Unauthorized"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Unauthorized"},"404":{"content":{"application/json":{"example":{"msg":"Object not found"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Not Found"}},"tags":["roles"]},"post":{"parameters":[{"in":"path","name":"user_id","required":true,"schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"content":{"application/json":{"example":{"msg":"Success"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"OK"},"401":{"content":{"application/json":{"example":{"msg":"Unauthorized"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Unauthorized"},"404":{"content":{"application/json":{"example":{"msg":"Object not found"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Not Found"}},"tags":["roles"]}},"/api/v1/roles/{role_id}":{"delete":{"parameters":[{"in":"path","name":"role_id","required":true,"schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"content":{"application/json":{"example":{"msg":"Success"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"OK"},"401":{"content":{"application/json":{"example":{"msg":"Unauthorized"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Unauthorized"},"404":{"content":{"application/json":{"example":{"msg":"Object not found"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Not Found"}},"tags":["roles"]},"put":{"parameters":[{"in":"path","name":"role_id","required":true,"schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"content":{"application/json":{"example":{"msg":"Success"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"OK"},"401":{"content":{"application/json":{"example":{"msg":"Unauthorized"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Unauthorized"},"404":{"content":{"application/json":{"example":{"msg":"Object not found"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Not Found"}},"tags":["roles"]}},"/api/v1/totp/check/{request_id}":{"post":{"parameters":[{"in":"path","name":"request_id","required":true,"schema":{"type":"string"}}],"responses":{"201":{"content":{"application/json":{"schema":{"$ref":"#/definitions/SocialTokenSchema"}}},"description":"Created"},"401":{"content":{"application/json":{"example":{"msg":"Unauthorized"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Unauthorized"}},"tags":["totp"]}},"/api/v1/totp/sync":{"get":{"responses":{"200":{"content":{"application/json":{"example":{"msg":"Success"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"OK"},"201":{"content":{"application/json":{"schema":{"$ref":"#/definitions/ProvisioningUrlSchema"}}},"description":"Created"},"401":{"content":{"application/json":{"example":{"msg":"Unauthorized"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Unauthorized"}},"tags":["totp"]},"post":{"responses":{"200":{"content":{"application/json":{"example":{"msg":"Success"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"OK"},"201":{"content":{"application/json":{"schema":{"$ref":"#/definitions/ProvisioningUrlSchema"}}},"description":"Created"},"401":{"content":{"application/json":{"example":{"msg":"Unauthorized"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Unauthorized"}},"tags":["totp"]}},"/api/v1/users/history/{user_id}":{"get":{"parameters":[{"in":"path","name":"user_id","required":true,"schema":{"format":"uuid","type":"string"}},{"in":"query","name":"page_num","schema":{"default":1,"maximum":1,"minimum":1,"type":"integer"}},{"in":"query","name":"page_items","schema":{"default":20,"maximum":100,"minimum":1,"type":"integer"}},{"in":"query","name":"year","schema":{"default":2022,"type":"integer"}},{"in":"query","name":"month","schema":{"default":6,"maximum":12,"minimum":1,"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/definitions/UserHistorySchema"},"type":"array"}}},"description":"OK"},"401":{"content":{"application/json":{"example":{"msg":"Unauthorized"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Unauthorized"},"404":{"content":{"application/json":{"example":{"msg":"Object not found"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Not Found"}},"tags":["users"]}},"/api/v1/users/login":{"post":{"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/definitions/RequestIdSchema"}}},"description":"OK"},"401":{"content":{"application/json":{"example":{"msg":"Unauthorized"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Unauthorized"}},"tags":["users"]}},"/api/v1/users/logout/{user_id}":{"get":{"parameters":[{"in":"path","name":"user_id","required":true,"schema":{"format":"uuid","type":"string"}},{"in":"query","name":"all_devices","schema":{"enum":["false","true"],"type":"string"}}],"responses":{"200":{"content":{"application/json":{"example":{"msg":"Success"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"OK"},"401":{"content":{"application/json":{"example":{"msg":"Unauthorized"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Unauthorized"}},"tags":["users"]}},"/api/v1/users/refresh/{user_id}":{"get":{"parameters":[{"in":"path","name":"user_id","required":true,"schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/definitions/TokenSchema"}}},"description":"OK"},"401":{"content":{"application/json":{"example":{"msg":"Unauthorized"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Unauthorized"}},"tags":["users"]}},"/api/v1/users/register":{"post":{"responses":{"201":{"content":{"application/json":{"example":{"msg":"Object successfully created"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Created"},"409":{"content":{"application/json":{"example":{"msg":"Object already exists"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Conflict"},"429":{"content":{"application/json":{"example":{"msg":"Too Many Requests"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Too Many Requests"}},"tags":["users"]}},"/api/v1/users/social/delete/{provider}":{"delete":{"parameters":[{"in":"path","name":"provider","required":true,"schema":{"enum":["google","yandex"],"type":"string"}}],"responses":{"200":{"content":{"application/json":{"example":{"msg":"Success"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"OK"},"401":{"content":{"application/json":{"example":{"msg":"Unauthorized"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Unauthorized"},"404":{"content":{"application/json":{"example":{"msg":"Object not found"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Not Found"}},"tags":["users"]}},"/api/v1/users/social/login/{provider}":{"get":{"parameters":[{"in":"path","name":"provider","required":true,"schema":{"enum":["google","yandex"],"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/definitions/RequestIdSchema"}}},"description":"OK"},"404":{"content":{"application/json":{"example":{"msg":"Object not found"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Not Found"}},"tags":["users"]}},"/api/v1/users/{user_id}":{"put":{"parameters":[{"in":"path","name":"user_id","required":true,"schema":{"format":"uuid","type":"string"}}],"responses":{"200":{"content":{"application/json":{"example":{"msg":"Success"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"OK"},"401":{"content":{"application/json":{"example":{"msg":"Unauthorized"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Unauthorized"},"404":{"content":{"application/json":{"example":{"msg":"Object not found"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Not Found"},"409":{"content":{"application/json":{"example":{"msg":"Object already exists"},"schema":{"$ref":"#/definitions/MsgSchema"}}},"description":"Conflict"}},"tags":["users"]}}},"security":{"bearerAuth":[]}}
